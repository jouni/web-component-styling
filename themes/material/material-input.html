<dom-module id="material-input">
  <template>
    <style>
      html,
      vaadin-input {
        --material-input__margin: 16px 0 8px;

        --material-input__label__font-scale: calc(12 / 16);
        --material-input__label__color: var(--material__color__text--secondary);

        --material-input__input__font-size: var(--material__font-size);
        --material-input__input__color: var(--material__color__text--primary);
        --material-input__input__height: calc(var(--material__grid-size) * 4);

        --material-input__label: {
          line-height: 1;
          color: var(--material-input__label__color);
          font-size: var(--material-input__input__font-size);
          transform-origin: 0 50%;
          /* Firefox can’t handle transform/scale with calc */
          /*transform: scale(var(--material-input__label__font-scale));*/
          transform: scale(0.75);
          transition: transform 0.2s;
        }
      }

      vaadin-input {
        margin: var(--material-input__margin);
        /* Reserve for the focus underline */
        padding-bottom: 1px;
        /* Fix Chrome’s dancing labels */
        contain: content;

        --vaadin-input__label: {
          @apply --material-input__label;
        }

        --vaadin-input__input: {
          background: transparent;
          color: inherit;
          font: inherit;
          border: 0;
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          width: 100%;
          outline: none;
          width: calc(var(--material__grid-size) * 20);
          height: calc(var(--material__grid-size) * 4);
          margin: var(--material-input__input__margin);
          color: var(--material-input__input__color);
          font-size: var(--material-input__input__font-size);
          border-bottom: 1px solid var(--material__color__divider);
        }

        --vaadin-input__input-placeholder: {
          color: inherit;
          opacity: 0.4;
        }
      }

      vaadin-input[empty] {
        --vaadin-input__label: {
          @apply --material-input__label;
          transform: scale(1) translateY(calc(var(--material__grid-size) * 2 + 50%));
          pointer-events: none;
        }
      }

      vaadin-input[focus]:not([empty]) {
        --vaadin-input__label: {
          @apply --material-input__label;
          color: var(--material__color__primary);
        }
      }

      vaadin-input::after {
        content: "";
        display: block;
        width: 100%;
        height: 2px;
        margin: -1px 0;
        background: var(--material__color__primary);
        transform: scalex(0);
        transition: transform 0.2s;
      }

      vaadin-input[focus]::after {
        transform: scale(1);
      }
    </style>
  </template>
</dom-module>
