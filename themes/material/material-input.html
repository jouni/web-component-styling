<dom-module id="material-input">
  <template>
    <style>
      html,
      vaadin-input {
        --material-input__margin: 16px 0 8px;

        --material-input__label__font-scale: calc(12 / 16);
        --material-input__label__color: var(--material__color__text--secondary);

        --material-input__input__font-size: var(--font-size);
        --material-input__input__color: var(--material__color__text--primary);
        --material-input__input__height: calc(var(--grid-size) * 4);

        --material-input__label: {
          line-height: 1;
          color: var(--material-input__label__color);
          font-size: var(--material-input__input__font-size);
          transform-origin: 0 50%;
          /* Firefox can’t handle transform/scale with calc */
          /*transform: scale(var(--material-input__label__font-scale));*/
          transform: scale(0.75);
          transition: transform 0.18s;
        }

        --material-input__input-wrapper: {
          background-image: linear-gradient(-180deg, var(--material__color__divider) 0px, transparent 1px),
                            linear-gradient(-180deg, var(--primary-color), var(--primary-color));
          background-repeat: no-repeat;
          background-position: 50% 100%;
          transition: background-size 0.18s;
        }
      }

      vaadin-input {
        margin: var(--material-input__margin);
        /* Reserve for the underline */
        position: relative;
        padding-bottom: 2px;
        /* Fix Chrome’s dancing labels */
        contain: content;
        min-width: calc(var(--grid-size) * 6);

        --vaadin-input__label: {
          @apply --material-input__label;
        }

        --vaadin-input__input-wrapper: {
          @apply --material-input__input-wrapper;
          background-size: 100% 2px, 0% 2px;
        }

        --vaadin-input__input: {
          background: transparent;
          color: inherit;
          font: inherit;
          border: 0;
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          outline: none;
          height: calc(var(--grid-size) * 4);
          margin: var(--material-input__input__margin);
          color: var(--material-input__input__color);
          font-size: var(--material-input__input__font-size);
        }

        --vaadin-input__input-placeholder: {
          color: inherit;
          opacity: 0.4;
        }
      }

      vaadin-input:not([has-value]):not([placeholder]):not([focused]) {
        --vaadin-input__label: {
          @apply --material-input__label;
          transform: scale(1) translateY(calc(var(--grid-size) * 2 + 50%));
          pointer-events: none;
        }
      }

      vaadin-input[focused] {
        --vaadin-input__label: {
          @apply --material-input__label;
          color: var(--primary-color);
        }

        --vaadin-input__input-wrapper: {
          @apply --material-input__input-wrapper;
          background-size: 100% 2px, 100% 2px;
        }
      }
    </style>
  </template>
</dom-module>
